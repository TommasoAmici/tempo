import { Component, ErrorInfo, ReactNode } from "react";

type Props = {
  children: ReactNode;
  fallback?: ReactNode;
};

type State = {
  hasError: boolean;
};

export class ErrorBoundary extends Component<Props, State> {
  public state: State = {
    hasError: false,
  };

  public static getDerivedStateFromError(_: Error): State {
    return { hasError: true };
  }

  public componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    console.error("Uncaught error:", error, errorInfo);
  }

  public render() {
    if (!this.state.hasError) {
      return this.props.fallback ?? <DefaultFallback />;
    }

    return this.props.children;
  }
}

function DefaultFallback() {
  return (
    <div className="flex flex-col border-8 border-double border-black p-8 font-mono">
      <div className="flex items-center gap-8">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="120"
          height="120"
          viewBox="0 0 684 683"
          version="1.1"
          aria-hidden="true"
        >
          <path
            fill="#ffffff"
            d=" M 0.00 0.00 L 684.00 0.00 L 684.00 683.00 L 0.00 683.00 L 0.00 0.00 Z"
          />
          <path
            fill="#000000"
            d=" M 400.00 42.00 C 409.66 42.00 419.33 42.00 429.00 42.00 C 428.99 49.33 428.99 56.67 429.00 64.00 C 419.33 64.00 409.66 64.00 400.00 64.00 C 399.99 56.66 399.99 49.33 400.00 42.00 Z"
          />
          <path
            fill="#000000"
            d=" M 553.00 42.00 C 562.66 42.00 572.33 42.00 582.00 42.00 C 581.99 49.33 581.99 56.67 582.00 64.00 C 574.66 64.00 567.33 64.00 560.00 64.00 C 559.99 71.00 559.99 78.00 560.00 85.00 C 552.66 85.00 545.33 85.00 538.00 85.00 C 537.99 92.33 537.99 99.66 538.00 107.00 C 536.25 107.00 532.75 107.00 531.00 107.00 C 531.00 105.25 531.00 101.75 531.00 100.00 C 529.25 100.00 525.75 100.00 524.00 100.00 C 523.99 107.33 523.99 114.67 524.00 122.00 C 514.33 122.00 504.66 122.00 495.00 122.00 C 494.99 114.66 494.99 107.33 495.00 100.00 C 501.99 100.00 508.99 100.00 516.00 100.00 C 515.99 92.66 515.99 85.33 516.00 78.00 C 523.32 78.00 530.66 78.00 538.00 78.00 C 537.99 70.67 537.99 63.33 538.00 56.00 C 541.75 56.00 549.25 56.00 553.00 56.00 C 552.98 51.33 553.00 46.67 553.00 42.00 Z"
          />
          <path
            fill="#000000"
            d=" M 422.00 78.00 C 429.33 78.00 436.66 78.00 444.00 78.00 C 443.99 87.67 444.00 97.33 444.00 107.00 C 436.66 107.00 429.33 107.00 422.00 107.00 C 421.99 97.33 422.00 87.67 422.00 78.00 Z"
          />
          <path
            fill="#000000"
            d=" M 327.00 100.00 C 334.33 100.00 341.66 100.00 349.00 100.00 C 349.00 107.33 349.00 114.67 349.00 122.00 C 341.66 122.00 334.33 122.00 327.00 122.00 C 326.99 114.66 327.00 107.33 327.00 100.00 Z"
          />
          <path
            fill="#000000"
            d=" M 363.00 115.00 C 370.33 115.00 377.66 115.00 385.00 115.00 C 385.00 124.67 385.00 134.33 385.00 144.00 C 377.66 144.00 370.33 144.00 363.00 144.00 C 362.99 134.33 363.00 124.67 363.00 115.00 Z"
          />
          <path
            fill="#000000"
            d=" M 444.00 115.00 C 448.65 114.99 453.33 114.99 458.00 115.00 C 458.00 116.75 458.00 120.25 458.00 121.99 C 459.75 121.99 463.25 122.00 465.00 122.00 C 464.99 129.33 464.99 136.67 465.00 144.00 C 457.99 144.00 450.99 144.00 444.00 144.00 C 443.99 141.33 443.99 138.67 444.00 136.00 C 441.33 136.00 438.66 136.00 436.00 136.00 C 435.98 131.33 436.00 126.67 436.00 122.00 C 438.66 122.00 441.32 122.00 444.00 122.00 C 444.00 120.25 444.00 116.75 444.00 115.00 Z"
          />
          <path
            fill="#000000"
            d=" M 400.00 136.00 C 409.66 136.00 419.33 136.00 429.00 136.00 C 428.99 143.33 428.99 150.66 429.00 158.00 C 419.33 158.00 409.66 158.00 400.00 158.00 C 399.99 150.66 399.99 143.33 400.00 136.00 Z"
          />
          <path
            fill="#000000"
            d=" M 232.00 158.00 C 263.67 158.00 295.33 158.00 327.00 158.00 C 327.00 161.75 327.00 169.25 327.00 173.00 C 339.00 172.99 351.00 173.01 363.00 173.00 C 362.99 177.66 363.00 182.33 363.00 187.00 C 365.66 187.00 368.33 187.00 371.00 187.00 C 370.99 189.66 370.99 192.33 371.00 195.00 C 388.00 195.00 405.00 195.00 422.00 195.00 C 422.00 191.25 422.00 183.75 422.00 180.00 C 441.33 180.00 460.66 180.00 480.00 180.00 C 480.00 183.75 480.00 191.25 480.00 195.00 C 463.00 195.00 446.00 195.00 429.00 195.00 C 429.00 196.75 429.00 200.24 429.00 201.99 C 427.25 202.00 423.75 202.00 422.00 202.00 C 422.00 205.75 422.00 213.25 422.00 217.00 C 402.33 217.00 382.66 217.00 363.00 217.00 C 363.00 209.66 362.99 202.33 363.00 195.00 C 351.00 195.01 339.00 194.99 327.00 195.00 C 327.00 191.25 327.00 183.75 327.00 180.00 C 295.33 180.00 263.67 180.00 232.00 180.00 C 232.00 187.33 232.00 194.66 232.00 202.00 C 227.32 201.99 222.67 202.00 218.00 202.00 C 218.00 219.00 218.00 236.00 218.00 253.00 C 237.33 253.02 256.66 252.98 276.00 253.00 C 276.02 272.33 275.98 291.67 276.00 311.00 C 288.00 310.99 300.00 311.01 312.00 311.00 C 312.00 314.75 312.00 322.25 312.00 326.00 C 324.33 325.99 336.66 326.00 349.00 326.00 C 348.99 338.00 349.00 350.00 349.00 362.00 C 353.65 361.99 358.34 362.00 363.00 362.00 C 362.98 376.66 363.01 391.33 363.00 406.00 C 370.33 405.99 377.66 406.00 385.00 406.00 C 385.00 449.67 385.00 493.33 385.00 537.00 C 377.66 536.99 370.32 536.99 363.00 537.00 C 363.01 551.66 362.98 566.33 363.00 581.00 C 358.32 580.98 353.66 581.00 349.00 581.00 C 349.01 593.00 348.99 604.99 349.00 617.00 C 347.25 617.00 343.75 617.00 342.01 617.00 C 342.00 619.66 342.00 622.32 342.00 625.00 C 332.00 624.99 322.00 624.99 312.00 625.00 C 311.99 629.64 312.00 634.33 312.00 639.00 C 297.66 638.99 283.33 639.01 269.00 639.00 C 269.00 642.75 269.00 650.25 269.00 654.00 C 225.00 654.00 181.00 654.00 137.00 654.00 C 137.00 650.25 137.00 642.75 137.00 639.00 C 122.67 639.01 108.33 638.98 94.00 639.00 C 94.00 634.31 94.00 629.67 94.00 625.00 C 81.66 625.00 69.33 624.99 56.99 625.00 C 57.02 610.33 56.98 595.66 57.00 581.00 C 52.33 580.97 47.67 581.00 43.00 581.00 C 43.01 568.99 42.99 557.00 43.00 545.00 C 35.67 544.99 28.33 544.99 21.00 545.00 C 21.00 498.67 21.00 452.33 21.00 406.00 C 25.67 405.98 30.33 406.00 35.00 406.00 C 34.99 394.00 35.01 382.00 35.00 370.00 C 42.33 370.00 49.67 369.99 57.00 370.00 C 56.98 355.33 57.01 340.66 57.00 326.00 C 69.33 326.00 81.66 325.99 94.00 326.00 C 94.00 322.25 94.00 314.75 94.00 311.00 C 108.33 311.01 122.66 310.99 137.00 311.00 C 137.02 291.67 136.98 272.33 137.00 253.00 C 154.00 253.00 171.00 253.00 188.00 253.00 C 188.02 233.66 187.98 214.33 188.00 195.00 C 195.33 195.00 202.66 195.00 210.00 195.00 C 210.00 187.66 210.00 180.33 210.00 173.00 C 217.33 173.00 224.66 173.00 232.00 173.00 C 232.00 169.25 232.00 161.75 232.00 158.00 Z"
          />
          <path
            fill="#000000"
            d=" M 516.00 158.00 C 523.33 158.00 530.66 158.00 538.00 158.00 C 537.99 165.33 537.99 172.66 538.00 180.00 C 530.66 180.00 523.33 180.00 516.00 180.00 C 515.99 172.66 515.99 165.33 516.00 158.00 Z"
          />
          <path
            fill="#000000"
            d=" M 553.00 158.00 C 562.66 158.00 572.33 158.00 582.00 158.00 C 581.99 165.33 581.99 172.66 582.00 180.00 C 572.32 180.00 562.66 180.00 553.00 180.00 C 552.99 172.66 552.99 165.33 553.00 158.00 Z"
          />
          <path
            fill="#000000"
            d=" M 589.00 158.00 C 598.66 158.00 608.33 158.00 618.00 158.00 C 617.99 165.33 617.99 172.66 618.00 180.00 C 608.32 180.00 598.66 180.00 589.00 180.00 C 588.99 172.66 588.99 165.33 589.00 158.00 Z"
          />
          <path
            fill="#000000"
            d=" M 524.00 209.00 C 528.64 208.99 533.33 209.00 538.00 209.00 C 537.99 216.33 537.99 223.66 538.00 231.00 C 545.32 230.99 552.66 231.00 560.00 231.00 C 559.99 238.28 560.00 245.56 560.01 252.85 C 563.36 253.07 570.05 253.49 573.39 253.70 C 574.11 258.23 577.95 259.53 581.56 260.90 C 581.73 263.25 581.91 265.60 582.09 267.96 C 585.82 267.98 593.27 268.00 597.00 268.01 C 596.99 275.00 596.99 282.00 597.00 289.00 C 589.66 288.99 582.33 288.99 575.00 289.00 C 574.98 284.32 575.00 279.67 575.00 275.00 C 567.66 275.00 560.33 274.99 553.00 275.00 C 552.99 267.66 552.99 260.33 553.00 253.00 C 545.66 253.00 538.33 253.00 531.00 253.00 C 531.00 249.25 531.00 241.75 531.00 238.00 C 527.25 238.00 519.75 238.00 516.00 238.00 C 515.99 231.00 515.99 224.00 516.00 217.00 C 518.66 217.00 521.32 217.00 524.00 217.00 C 523.99 214.33 523.99 211.66 524.00 209.00 Z"
          />
          <path
            fill="#000000"
            d=" M 400.00 231.00 C 407.32 230.99 414.66 231.00 421.99 231.00 C 422.00 232.75 422.00 236.25 422.00 237.99 C 423.75 238.00 427.25 238.00 429.00 238.00 C 429.00 241.75 429.00 249.25 429.00 253.00 C 427.25 253.00 423.76 253.00 422.01 253.00 C 422.00 254.75 422.00 258.25 422.00 260.00 C 418.25 260.00 410.75 260.00 407.00 260.00 C 407.00 263.75 407.00 271.25 407.00 275.00 C 399.66 274.99 392.33 275.00 385.00 275.00 C 385.00 282.33 384.99 289.66 385.00 297.00 C 377.66 297.00 370.33 297.00 363.00 297.00 C 362.99 287.33 363.00 277.66 363.00 268.00 C 366.75 268.00 374.25 268.00 378.00 268.00 C 378.00 264.25 378.00 256.75 378.00 253.00 C 385.33 253.00 392.66 253.00 400.00 253.00 C 399.99 245.66 400.00 238.33 400.00 231.00 Z"
          />
          <path
            fill="#000000"
            d=" M 458.00 231.00 C 465.32 231.00 472.66 231.00 479.99 231.00 C 480.00 232.75 480.00 236.25 480.00 237.99 C 481.75 238.00 485.25 238.00 487.00 238.00 C 487.00 241.75 487.00 249.25 487.00 253.00 C 485.25 253.00 481.75 253.00 480.01 253.00 C 480.00 254.75 480.00 258.25 480.00 260.00 C 472.66 260.00 465.33 260.00 458.00 260.00 C 457.99 250.33 457.99 240.67 458.00 231.00 Z"
          />
          <path
            fill="#000000"
            d=" M 458.00 268.00 C 465.32 268.00 472.66 268.00 479.99 268.00 C 480.00 269.75 480.00 273.25 480.00 274.99 C 481.75 275.00 485.25 275.00 487.00 275.00 C 486.98 279.66 487.00 284.33 487.00 289.00 C 485.25 289.00 481.75 289.00 480.01 289.00 C 480.00 291.66 479.99 294.33 480.00 297.00 C 472.66 296.99 465.33 296.99 458.00 297.00 C 457.99 287.33 457.99 277.67 458.00 268.00 Z"
          />
          <path
            fill="#000000"
            d=" M 458.00 311.00 C 467.66 311.00 477.33 311.00 487.00 311.00 C 487.00 314.75 487.00 322.25 487.00 326.00 C 485.25 326.00 481.75 326.00 480.01 326.00 C 480.00 327.75 480.00 331.25 480.00 333.00 C 472.66 333.00 465.33 333.00 458.00 333.00 C 457.99 325.66 457.99 318.33 458.00 311.00 Z"
          />
          <path
            fill="#ffffff"
            d=" M 94.00 406.00 C 101.33 405.99 108.67 405.99 116.00 406.00 C 116.00 413.33 116.00 420.66 116.00 428.00 C 108.66 427.99 101.33 427.99 94.00 428.00 C 94.00 420.66 94.00 413.33 94.00 406.00 Z"
          />
          <path
            fill="#ffffff"
            d=" M 79.00 443.00 C 82.75 443.00 90.25 443.00 94.00 443.00 C 94.00 462.33 94.00 481.66 94.00 501.00 C 90.25 501.00 82.75 501.00 79.00 501.00 C 79.00 481.66 79.00 462.33 79.00 443.00 Z"
          />
          <path
            fill="#ffffff"
            d=" M 94.00 523.00 C 101.33 522.99 108.67 522.99 116.00 523.00 C 116.00 530.33 116.00 537.66 116.00 545.00 C 108.66 544.99 101.33 544.99 94.00 545.00 C 94.00 537.66 94.00 530.33 94.00 523.00 Z"
          />
          <path
            fill="#ffffff"
            d=" M 130.00 559.00 C 139.66 558.99 149.33 558.99 159.00 559.00 C 159.00 566.33 159.00 573.66 159.00 581.00 C 149.33 580.99 139.67 581.00 130.00 581.00 C 130.00 573.66 130.00 566.33 130.00 559.00 Z"
          />
        </svg>
        <p>Sorry a system error occurred</p>
      </div>
      <button
        onClick={() => window.location.reload()}
        className="ml-auto rounded-xl border-2 border-black px-2 py-1"
      >
        Restart
      </button>
    </div>
  );
}
